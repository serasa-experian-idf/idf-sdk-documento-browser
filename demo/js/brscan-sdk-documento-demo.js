function startDemo(e){e.preloadModelos(),console.log(e.versaoDocumento),console.log(e);const o=loadConfig();o.habilitarTextosPersonalizados&&(e.textoPersonalizado=TEXTO_PERSONALIZADO),e.tamanhoArquivos=o.tamanhoArquivos,e.enviarTxt=o.enviarTxt,e.showCancelButton=o.showCancelButton,e.capturaEmDesktop=o.capturaEmDesktop,e.qntTentativasCapManual=o.qntTentativasCapManual,e.limiteNumeroTentativasErro=o.limiteNumeroTentativasErro,e.timeoutCaptura=o.timeoutCaptura,e.documentosAceitos=convertStringToArray(o.documentosAceitos),e.wizzard=o.wizzard,e.previewTitleSideA=o.previewTitleSideA,e.previewTitleSideB=o.previewTitleSideB,e.corPrimaria=o.corPrimary,document.documentElement.style.setProperty("--cor-primary",o.corPrimary),document.documentElement.style.setProperty("--font-family",o.fontFamily),document.documentElement.style.setProperty("--cor-textCorpo",o.corTextCorpo),document.documentElement.style.setProperty("--cor-textTitle",o.corTextTitle),document.documentElement.style.setProperty("--cor-textButton",o.corTextButton),document.documentElement.style.setProperty("--button-radius",o.radiusButton),document.documentElement.style.setProperty("--tamanho-textTitle",o.tamanhoTitulo),o.habilitarImagemUploladMaisCustomizada&&(e.imgAdicionaBtn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAABCFBMVEX////2OT32NkH3PTj//P3//fz3Ojz2OD/3Ozr2NUL3Pjf2MD/3OzH3V2P5YFjvDnPvEW/wFWr1Mkb9Xg/+YgrwEm7wF2fxGmTxHWDyIFzzI1nzJVXzKFL0K0/0LUz1L0n4RDD5SCv6TCb6UCD7VRv+ZgXuCnjyQoPzRX70SXj1TnD6ZVL7aU78bkn8ckX9d0D+7e31U2n7p6j2Ki/3Jif3anP5cWv1eanxRIn3VGj5ZFT9dkL+iVf4rcv9WwH/kVn/8en4ocf8zM36jpT5eoH5f3v7trr2Q1D4TUX8xMj1HzP5iI/6jon6vdTyWJP+onb/0b3+cB3/xanzZaH7y9//3cv/u5X91dQ6EuT2AAACpklEQVR4nO3dC1MSURyGcVRAxUXFtHvRDboXyaJ2WwuVikotK77/N+nssoOIzDRjZ2f3Pfv8PsH/mbP3gTmFAgAAAAAAAAAAAAAAgJta3d7mZreV9hiJGXTKbcNvbw3SHiUZe/3y/PzMTHlhwfO/pT1MEvb7s7Nx4dycf5D2OPb1TOBp4ZzfS3sg24qfls4Uep+LaY9k2Zf+4pnCit9NeyTLvi5NFHquXWw65wq30h7JrlL1XOFyKe2hrCpOKXTrUjOt0P01pFALhfoo1EehPgr1UaiPQn0U6qNQH4X6KNRHoT4K9VGoj0J9FOqjUB+F+vJUWHa+kDVUlac1dL+Qo1QVhfoo1EehPgr16fwboXgxpalreFHJ1X3fPtzZ2XkYezTyeOTJqVdDr0PVanVtcaKwUlk23oSeRp7FnsdexN5GXo55d3ScSOX75sZqaMOo1WqXjSvG1dC10HXjhnHTuGXcNur1+pqxGJos9DzvjnE3cm/o/tCDkUtGMG7dCIIfP+0HnmyshOLG2kTjKHG8MU6MGqesYWVY+K/GKHJoPdIIBbu2A7dXm5kqbARHdgN/rTQzVtgIflstPMxeYcPqcdpqNrNX2PhgsTA8SDNXGBxbLPyYxcJ1m3eMbBb+cb7Q5hpm8zy0ebtw/1paOHH9fpiDZxr3n0tz8G6Rg/fDHLzjDyud/k7zP3S+tV2U+99LKdRHoT4K9VGoj0J9FOqjUB+F+ijUx++89eWpkKNUFYX6KNRHoT4K9VGoj0J9FOqjUB+F+ijUR6E+CvVRqI9CffksdGsPS/f/jeD+XrI52A/Y/T2dz+/L7dhpmIO91QuF/fZYoX+Q9jhJ2OuX40LPd+0yExt0ym3Db28N0h4lMa1ub7PXbaU9BgAAAAAAAAAAAAAAQEL+AmfYeimEvgdTAAAAAElFTkSuQmCC"),e.iniciaCaptura(document.getElementById("documento"),((e,o)=>{console.log("callback: ",e,o)})).then((e=>{if(console.log("demo app return: ",e),document.body.style.overflow="auto",hideLoginContainer(),showResultContainer(),Array.isArray(e.image)){let o=e.image[0];o&&(document.getElementById("imgA").src=o);let t=e.image[1];t&&(document.getElementById("imgB").src=t)}document.getElementById("jsonResult").textContent=JSON.stringify(e)})).catch((e=>{hideLoginContainer(),showResultContainer(),document.getElementById("jsonResult").textContent=JSON.stringify(e),300!=e.id&&30!=e.id||(deleteCookie("bearerToken"),deleteCookie("legacyToken"))}))}function convertStringToArray(e){return e.includes(",")?e.split(","):[e]}function clearCookies(){document.cookie.split(";").forEach((function(e){document.cookie=e.replace(/^ +/,"").replace(/=.*/,"=;expires="+(new Date).toUTCString()+";path=/")}))}function deleteCookie(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"}function hideLoginContainer(){document.getElementById("login").style.display="none"}function hideResultContainer(){document.getElementById("sdkResult").style.display="none",document.getElementById("imgA").src="",document.getElementById("imgB").src="",document.getElementById("jsonResult").textContent=""}function showLoginContainer(){document.getElementById("login").style.display="block"}function showResultContainer(){document.getElementById("sdkResult").style.display="block"}function getSerasaIamUrl(e){return`${BASE_URL}/security/iam/v1/user-identities/login?clientId=${e}`}function getClientTokenURL(){return`${BASE_URL}/security/iam/v1/client-identities/login`}function disableAllButtons(){document.querySelectorAll("button").forEach((e=>{e.disabled=!0}))}function enableAllButtons(){document.querySelectorAll("button").forEach((e=>{e.disabled=!1}))}function setCookie(e,o){const t=new Date;t.setTime(t.getTime()+36e5);const n="expires="+t.toUTCString();document.cookie=e+"="+o+";"+n+";path=/"}function getCookie(e){const o=e+"=",t=document.cookie.split(";");for(let e=0;e<t.length;e++){let n=t[e];for(;" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(o))return n.substring(o.length,n.length)}return null}async function getToken(e,o,t){return new Promise((async(n,c)=>{let a=new Headers;a.append("Authorization","Basic "+btoa(o+":"+t));let l=await fetch(e,{method:"POST",headers:a});try{n((await l.json()).accessToken)}catch(e){console.log("ex",e),c({id:"INVALID_AUTHENTICATION",desc:"Erro ao gerar token. Por favor, verifique as credenciais e tente novamente."})}}))}function initApp(){const e=getCookie("bearerToken"),o=getCookie("legacyToken"),t=loadConfig().cdnModelo,n=loadConfig().habilitarWASlocal;hideResultContainer(),e?(hideLoginContainer(),startDemo(new window.BrScanSDKDocumento.Documento(e,"",n))):o?startDemo(new window.BrScanSDKDocumento.Documento({chave:o,cdnModelo:t,isLocalFilesWasOnnx:n})):(showLoginContainer(),console.log("Nenhum token encontrado, redirecionando para login."))}function testConstructors(){const e=new window.BrScanSDKDocumento.Documento({chave:"chave1",cdnModelo:"modelo1"});console.log("Instance1 com cdnModelo:",e);const o=new window.BrScanSDKDocumento.Documento({chave:"chave1"});console.log("Instance2 sem cdnModelo:",o);const t=new window.BrScanSDKDocumento.Documento("bearerToken1","userLogon1","modelo2");console.log("Instance3 com cdnModelo:",t);const n=new window.BrScanSDKDocumento.Documento("bearerToken1","userLogon1");console.log("Instance4 sem cdnModelo:",n);const c=new window.BrScanSDKDocumento.Documento({chave:"chave2",cdnModelo:"modelo3"});console.log("Instance5 com chave e cdnModelo:",c);const a=new window.BrScanSDKDocumento.Documento({chave:"chave2"});console.log("Instance6 com chave e sem cdnModelo:",a);const l=new window.BrScanSDKDocumento.Documento("bearerToken2","userLogon2","modelo4");console.log("Instance7 com bearerToken e cdnModelo:",l);const i=new window.BrScanSDKDocumento.Documento("bearerToken2","userLogon2");console.log("Instance8 com bearerToken e sem cdnModelo:",i)}document.getElementById("legacyButton").addEventListener("click",(function(){var e=document.getElementById("legacyKey").value,o=document.getElementById("error-message");const t=loadConfig().cdnModelo,n=loadConfig().habilitarWASlocal;""===e?(o.style.display="block",o.textContent="Por favor, preencha o campo com a chave legada"):(o.style.display="none",o.textContent="",setCookie("legacyToken",e),startDemo(new window.BrScanSDKDocumento.Documento({chave:e,cdnModelo:t,isLocalFilesWasOnnx:n})))})),document.getElementById("loginButton").addEventListener("click",(function(){var e=document.getElementById("clientId").value,o=document.getElementById("username").value,t=document.getElementById("password").value,n=document.getElementById("error-message");""===e||""===t?(n.style.display="block",n.textContent="Por favor, preencha os campos de clientId, user e senha."):""===o?(disableAllButtons(),n.style.display="none",n.textContent="",(async()=>{await getToken(getClientTokenURL(),e,t).then((e=>{if(enableAllButtons(),e){setCookie("bearerToken",e),n.style.display="none";const o=loadConfig().cdnModelo,t=loadConfig().habilitarWASlocal;startDemo(new window.BrScanSDKDocumento.Documento(e,"",o,t))}else n.style.display="block",n.textContent="Erro na autenticação",console.log("Erro na autenticação")})).catch((e=>{enableAllButtons(),n.style.display="block",n.textContent=e,console.log("err",e)}))})()):(disableAllButtons(),n.style.display="none",n.textContent="",(async()=>{await getToken(getSerasaIamUrl(e),o,t).then((e=>{if(enableAllButtons(),e){setCookie("bearerToken",e);const o=loadConfig().cdnModelo,t=loadConfig().habilitarWASlocal;n.style.display="none",startDemo(new window.BrScanSDKDocumento.Documento(e,"",o,t))}else n.style.display="block",n.textContent="Erro na autenticação",console.log("Erro na autenticação")})).catch((e=>{enableAllButtons(),n.style.display="block",n.textContent=e,console.log("err",e)}))})())})),document.getElementById("tryAgain").addEventListener("click",(function(){initApp()})),document.addEventListener("DOMContentLoaded",(function(e){const o=document.createElement("script");switch(o.type="text/javascript",console.log("loaded env: ",SERASA_SDK_ENV),SERASA_SDK_ENV){case"dev":o.src="../brscan-dev-sdk-documento.min.js";break;case"uat":o.src="../brscan-uat-sdk-documento.min.js";break;case"prod":o.src="../brscan-sdk-documento.min.js";break;default:alert(`Ambiente ${SERASA_SDK_ENV} não encontrado`)}o.onload=function(){initApp()},window.document.body.appendChild(o)}));